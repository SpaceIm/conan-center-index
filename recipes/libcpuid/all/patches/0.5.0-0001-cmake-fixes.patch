--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -13,8 +13,8 @@ set(CMAKE_C_STANDARD 99)
 # Global variables
 set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake")
 
+include(GNUInstallDirs)
 if(UNIX)
-  include(GNUInstallDirs)
   set(prefix "${CMAKE_INSTALL_PREFIX}")
   set(exec_prefix "\${prefix}")
   set(libdir "\${exec_prefix}/lib")
@@ -27,4 +27,6 @@ endif(UNIX)
 # Include subdirectories
 add_subdirectory(libcpuid)
 add_subdirectory(cpuid_tool)
+if(LIBCPUID_TESTS)
 add_subdirectory(tests)
+endif()
--- a/cpuid_tool/CMakeLists.txt
+++ b/cpuid_tool/CMakeLists.txt
@@ -2,7 +2,7 @@ add_executable(cpuid_tool cpuid_tool.c)
 
 target_link_libraries(cpuid_tool cpuid)
 
-if(WIN32)
+if(0)
   install(
     TARGETS cpuid_tool
     CONFIGURATIONS Debug
@@ -12,5 +12,5 @@ if(WIN32)
     CONFIGURATIONS Release
     RUNTIME DESTINATION bin/Release)
 else()
-  install(TARGETS cpuid_tool RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR})
+  install(TARGETS cpuid_tool DESTINATION ${CMAKE_INSTALL_BINDIR})
 endif()
--- a/libcpuid/CMakeLists.txt
+++ b/libcpuid/CMakeLists.txt
@@ -13,10 +13,11 @@ if("${MSVC_CXX_ARCHITECTURE_ID}" MATCHES "x64")
 endif()
 
 if(UNIX)
-  add_library(cpuid SHARED ${cpuid_sources})
+  add_library(cpuid ${cpuid_sources})
 else()
   add_library(cpuid ${cpuid_sources})
 endif()
+set_target_properties(cpuid PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS ON)
 target_include_directories(cpuid SYSTEM PUBLIC $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>)
 
 target_compile_definitions(cpuid PRIVATE VERSION="${PROJECT_VERSION}")
@@ -67,7 +68,7 @@ include(CMakePackageConfigHelpers)
 write_basic_package_version_file("${version_config}" COMPATIBILITY SameMajorVersion)
 
 # Configure '<PROJECT-NAME>Config.cmake' Use variables: * TARGETS_EXPORT_NAME * PROJECT_NAME
-configure_package_config_file("${CMAKE_MODULE_PATH}/Config.cmake.in" "${project_config}"
+configure_package_config_file("${PROJECT_SOURCE_DIR}/cmake/Config.cmake.in" "${project_config}"
                               INSTALL_DESTINATION "${config_install_dir}")
 
 # Installation
